	<!DOCTYPE = HTML>
	<html>
		<head>
			<title>
				mlp
			</title>
			<link rel="stylesheet" type="text/css" href="mlp.css">
			<script src="../js.tool.box/iterasures.js" type="text/javascript">
			</script>
			<script src="../js.tool.box/plot2d.js" type="text/javascript">
			</script>
			<script src="../js.tool.box/mlp.js" type="text/javascript">
			</script>
		</head>
		<body>

			<p id='error'>
				error:
			</p>

			<canvas id="cnvs" width="640" height="400" style="border : 1px solid #123456; position:relative; width:100%; height:92%; background-color:#f0f0f0">
	<!--		<canvas id="myCanvas" width="640" height="400" style="border:1px solid #d3d3d3;">-->

				Your browser does not support the HTML5 canvas tag.
			</canvas>

			<script type="text/javascript">

				var
				doc = document.getElementById( "error" ),
				mlp = new MLP ( [ 3, 3, 8 ], 0, 1, .2 );

				var
				p = [
					[ 0, 0, 0 ],
					[ 1, 0, 0 ],
					[ 0, 1, 0 ],
					[ 1, 1, 0 ],
					[ 0, 0, 1 ],
					[ 1, 0, 1 ],
					[ 0, 1, 1 ],
					[ 1, 1, 1 ]
				],
/*				t = [
					[ 0, 0 ],
					[ 0, 1 ],
					[ 1, 0 ],
					[ 1 ,1 ],
					[ 1, 1 ],
					[ 1, 0 ],
					[ 0, 1 ],
					[ 0, 0 ]
				],
*/				t = [
					[ 1, 0, 0, 0, 0, 0, 0, 0 ],
					[ 0, 1, 0, 0, 0, 0, 0, 0 ],
					[ 0, 0, 1, 0, 0, 0, 0, 0 ],
					[ 0, 0, 0, 1, 0, 0, 0, 0 ],
					[ 0, 0, 0, 0, 1, 0, 0, 0 ],
					[ 0, 0, 0, 0, 0, 1, 0, 0 ],
					[ 0, 0, 0, 0, 0, 0, 1, 0 ],
					[ 0, 0, 0, 0, 0, 0, 0, 1 ]
				],
				wdt      = t[ 0 ].length,
				len      = 100,
				curPatId = 0,
				err		 = arr ( wdt, cst ( 0 ) ),
				cue_err  = arr ( wdt, function ( i ) { return arr ( len, cst ( 0 ) ); } ),
				cue_x    = arr ( wdt, function ( i ) { return arr ( len, pol ( [ 0, 1e3 ] ) ); } ),
				cue_id   = arr ( wdt, cst ( -1 ) ),
				cnvs     = document.getElementById ( "cnvs" ),
				cntxt    = cnvs.getContext ( "2d" ),
				col      = [ "#000000", "#0000ff", "#00ff00", "#00ffff", "#ff0000", "#ff00ff",  "#ffff00",  "#ffffff", "black" ],
				loop     = 0,
				paintErr = function ( ) {

					if ( ++cue_id[ curPatId ] >= len )

						cue_id[ curPatId ] = 0;

					var
					e_ = mlp.rms ( );

					err[ curPatId ] = e_;

					plot = new Plot2d ( "cnvs" );

					var
					id = cue_id[ curPatId ];

					cue_x[ curPatId ][ id ]   = loop;
					cue_err[ curPatId ][ id ] = e_

					for ( var i = 0; i < wdt; ++ i ) {

						plot.vcol ( col[ i ] );
						plot.addYX ( cue_err[ i ], cue_x[ i ] );
					}

					doc.innerHTML = ( "Loop: " + loop + "\tRMS: " + e_ );

					plot.vcol ( "#c0c0c0" );
					plot.grid ( );
					plot.draw ( );
				},
				doLoops = function ( pI_loops ) {

					for ( var l = 0; l < pI_loops; ++ l ) {

						curPatId = parseInt( wdt * Math.random ( ) );

						var
						r_   = Math.random ( ),
						absE = cum ( rAdd, err ),
						prob = rel ( rDiv, err, arr ( err.length, cst ( absE ) ) ),
						p_   = prob[ curPatId ];

						while ( p_ <= r_ && curPatId < wdt - 1 ) {

							p_ += prob[ ++ curPatId ];
						}

						mlp.remember( p[ curPatId ] );
						mlp.teach ( t[ curPatId ] );
					}

					loop += pI_loops;
				},
				tm = new Date ( ).getTime ( ),
				timer = function ( ) {

					requestAnimationFrame( timer );

					var
					nw = ( new Date ( ).getTime ( ) - tm );

					if ( 10 / 60 < nw ) {

						paintErr ( );

						doLoops ( 100 );

						tm = new Date ( ).getTime ( );
					}
				};

				timer ( );

			</script>

		</body>
	</html>
